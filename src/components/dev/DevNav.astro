---
// No frontmatter needed for static navbar
const { pathname } = Astro.url;

const navigationItems = [
  { label: 'Home', href: '/', id: 'home' },
  { 
    label: 'Design pages', 
    id: 'designDropdown',
    items: [
      { label: 'Design System', href: '/design', id: 'design' },
      { label: 'Example Page', href: '/design/example-page', id: 'example-page' },
      { label: 'Homepage Demo', href: '/design/homepage-demo', id: 'homepage-demo' }
    ]
  },
  { 
    label: 'Dev pages', 
    id: 'devDropdown',
    items: [
      { label: 'Components All', href: '/dev/design-system/components-all', id: 'components-all' },
      { label: 'Buttons', href: '/dev/design-system/buttons-page', id: 'buttons' },
      { label: 'Typography', href: '/dev/design-system/typography', id: 'typography' },
      { label: 'Container', href: '/dev/design-system/container', id: 'container' },
      { label: 'Tags', href: '/dev/design-system/tags', id: 'tags' }
    ]
  },
  { 
    label: 'Dev components', 
    id: 'devComponentsDropdown',
    items: [
      { label: 'Example Slider', href: '/dev/components-pages/example-slider-page', id: 'example-slider' },
      { label: 'Example Hero Section', href: '/dev/components-pages/example-hero-page', id: 'example-hero' },
              { label: 'Hero Slider', href: '/dev/components-pages/hero-slider-page', id: 'hero-slider' },
      { label: 'Example Countdown', href: '/dev/components-pages/example-count-down-page', id: 'example-countdown' },
      { label: 'Example Accordion', href: '/dev/components-pages/example-accordion-page', id: 'example-accordion' },
      { label: 'Example Back to Top', href: '/dev/components-pages/example-back-to-top-page', id: 'example-back-to-top' },
      { label: 'Example Checkbox', href: '/dev/components-pages/example-checkbox-page', id: 'example-checkbox' },
      { label: 'Example Floating Labels', href: '/dev/components-pages/example-floating-labels-page', id: 'example-floating-labels' },
      { label: 'Example Modal', href: '/dev/components-pages/example-modal-page', id: 'example-modal' }
    ]
  }
];

function isActiveLink(href: string): boolean {
  if (href === '/' && pathname === '/') return true;
  if (href !== '/' && pathname.startsWith(href)) return true;
  return false;
}
---

<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
            <img
                src="/favicon.svg"
                alt="Brand"
                width="30"
                height="30"
                class="d-inline-block align-text-top me-2"
            />
            Brand Starter
        </a>
        <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNav"
            aria-controls="navbarNav"
            aria-expanded="false"
            aria-label="Toggle navigation"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto">
                {navigationItems.map((item) => (
                  item.items ? (
                    <li class="nav-item dropdown">
                        <a
                            class="nav-link dropdown-toggle"
                            href="#"
                            id={item.id}
                            role="button"
                            data-bs-toggle="dropdown"
                            aria-expanded="false"
                        >
                            {item.label}
                        </a>
                        <ul class="dropdown-menu" aria-labelledby={item.id}>
                            {item.id === 'devDropdown' && (
                              <>
                                <li>
                                    <a class={`dropdown-item${isActiveLink('/dev/design-system/components-all') ? ' active' : ''}`} href="/dev/design-system/components-all"
                                        >Components All</a>
                                </li>
                                <li class="dropdown-divider"></li>
                              </>
                            )}
                            {item.items.map((subItem) => (
                              <li>
                                  <a class={`dropdown-item${isActiveLink(subItem.href) ? ' active' : ''}`} href={subItem.href}
                                      >{subItem.label}</a>
                              </li>
                            ))}
                        </ul>
                    </li>
                  ) : (
                    <li class="nav-item">
                        <a class={`nav-link${isActiveLink(item.href) ? ' active' : ''}`} href={item.href}>{item.label}</a>
                    </li>
                  )
                ))}
            </ul>
        </div>
    </div>
</nav>
